"use strict";

exports.__esModule = true;
exports.default = clientBabelConfig;
// for backend apps, just use esbuild
// this is intended for client transpilation
const corejs = {
  version: 3,
  // throws error? pkgJson.dependencies['core-js'], @see fossissues.md for link to issue
  proposals: true
};
const isProd = process.env.NODE_ENV === 'production';

function clientBabelConfig(api) {
  api?.cache(() => isProd); // @see https://babeljs.io/docs/en/assumptions

  const assumptions = {
    arrayLikeIsIterable: true,
    constantReexports: isProd,
    // might change due to module.hot?
    constantSuper: true,
    enumerableModuleMeta: true,
    ignoreFunctionLength: true,
    ignoreToPrimitiveHint: true,
    iterableIsArray: false,
    mutableTemplateObject: false,
    noClassCalls: true,
    noDocumentAll: true,
    noNewArrows: true,
    objectRestNoSymbols: true,
    privateFieldsAsProperties: !isProd,
    pureGetters: true,
    setClassMethods: false,
    setComputedProperties: false,
    setPublicClassFields: false,
    setSpreadProperties: false,
    skipForOfIteratorClosing: true,
    superIsCallableConstructor: true
  };
  const presets = [// [ // todo: @see https://github.com/babel/preset-modules
  //   '@babel/preset-modules',
  //   {
  //     loose: true
  //   },
  // ],
  [// @see https://github.com/zloirock/core-js#babelpreset-env
  '@babel/preset-env', {
    targets: {
      browsers: 'last 2 versions, > 5%'
    },
    // import corejs polyfils as used by each file
    useBuiltIns: 'usage',
    bugfixes: true,
    // enable
    corejs,
    modules: false,
    // rely on webpack for treeshaking which needs this
    debug: !isProd
  }], ['@babel/preset-react', {
    runtime: 'classic',
    development: !isProd
  }], ['@babel/preset-flow']].filter(e => e);
  const plugins = [['@babel/plugin-transform-runtime', {
    absoluteRuntime: false,
    corejs,
    helpers: true,
    regenerator: true,
    version: pkgJson.dependencies['@babel/runtime-corejs3']
  }], ['babel-plugin-styled-components', {
    displayName: !isProd,
    fileName: !isProd,
    minify: isProd,
    namespace: 'nirv',
    pure: isProd,
    srr: false,
    transpileTemplateLiterals: isProd
  }], 'tailcall-optimization', // dont need any of this shit because we use corejs
  // keeping this here tho just in case
  // '@babel/plugin-proposal-class-properties',
  // '@babel/plugin-proposal-export-default-from',
  // '@babel/plugin-proposal-nullish-coalescing-operator',
  // '@babel/plugin-proposal-optional-catch-binding',
  // '@babel/plugin-proposal-optional-chaining',
  // '@babel/plugin-proposal-private-methods',
  // '@babel/plugin-proposal-throw-expressions',
  // '@babel/plugin-syntax-dynamic-import',
  // '@babel/plugin-proposal-export-default-from',
  '@babel/plugin-transform-react-constant-elements', isProd && '@babel/plugin-transform-react-inline-elements' // [ disabled for treeshaking via webpack
  //   '@babel/plugin-transform-modules-commonjs',
  //   {
  //     importInterop: 'babel'
  //   }
  // ],
  ].filter(e => e);
  return {
    assumptions,
    presets,
    plugins
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2JhYmVsL29sZC5iYWJlbC5jb25maWcubWpzIl0sIm5hbWVzIjpbImNvcmVqcyIsInZlcnNpb24iLCJwcm9wb3NhbHMiLCJpc1Byb2QiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJjbGllbnRCYWJlbENvbmZpZyIsImFwaSIsImNhY2hlIiwiYXNzdW1wdGlvbnMiLCJhcnJheUxpa2VJc0l0ZXJhYmxlIiwiY29uc3RhbnRSZWV4cG9ydHMiLCJjb25zdGFudFN1cGVyIiwiZW51bWVyYWJsZU1vZHVsZU1ldGEiLCJpZ25vcmVGdW5jdGlvbkxlbmd0aCIsImlnbm9yZVRvUHJpbWl0aXZlSGludCIsIml0ZXJhYmxlSXNBcnJheSIsIm11dGFibGVUZW1wbGF0ZU9iamVjdCIsIm5vQ2xhc3NDYWxscyIsIm5vRG9jdW1lbnRBbGwiLCJub05ld0Fycm93cyIsIm9iamVjdFJlc3ROb1N5bWJvbHMiLCJwcml2YXRlRmllbGRzQXNQcm9wZXJ0aWVzIiwicHVyZUdldHRlcnMiLCJzZXRDbGFzc01ldGhvZHMiLCJzZXRDb21wdXRlZFByb3BlcnRpZXMiLCJzZXRQdWJsaWNDbGFzc0ZpZWxkcyIsInNldFNwcmVhZFByb3BlcnRpZXMiLCJza2lwRm9yT2ZJdGVyYXRvckNsb3NpbmciLCJzdXBlcklzQ2FsbGFibGVDb25zdHJ1Y3RvciIsInByZXNldHMiLCJ0YXJnZXRzIiwiYnJvd3NlcnMiLCJ1c2VCdWlsdElucyIsImJ1Z2ZpeGVzIiwibW9kdWxlcyIsImRlYnVnIiwicnVudGltZSIsImRldmVsb3BtZW50IiwiZmlsdGVyIiwiZSIsInBsdWdpbnMiLCJhYnNvbHV0ZVJ1bnRpbWUiLCJoZWxwZXJzIiwicmVnZW5lcmF0b3IiLCJwa2dKc29uIiwiZGVwZW5kZW5jaWVzIiwiZGlzcGxheU5hbWUiLCJmaWxlTmFtZSIsIm1pbmlmeSIsIm5hbWVzcGFjZSIsInB1cmUiLCJzcnIiLCJ0cmFuc3BpbGVUZW1wbGF0ZUxpdGVyYWxzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7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LEVBdUJkLHVCQXZCYyxFQXlCZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBcENjLEVBcUNkQSxNQUFNLElBQUksK0NBckNJLENBc0NkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNDYyxJQTRDZHFDLE1BNUNjLENBNENQQyxDQUFDLElBQUlBLENBNUNFLENBQWhCO0FBOENBLFNBQU87QUFDTC9CLElBQUFBLFdBREs7QUFFTHFCLElBQUFBLE9BRks7QUFHTFcsSUFBQUE7QUFISyxHQUFQO0FBS0QiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBmb3IgYmFja2VuZCBhcHBzLCBqdXN0IHVzZSBlc2J1aWxkXG4vLyB0aGlzIGlzIGludGVuZGVkIGZvciBjbGllbnQgdHJhbnNwaWxhdGlvblxuXG5jb25zdCBjb3JlanMgPSB7XG4gIHZlcnNpb246IDMsIC8vIHRocm93cyBlcnJvcj8gcGtnSnNvbi5kZXBlbmRlbmNpZXNbJ2NvcmUtanMnXSwgQHNlZSBmb3NzaXNzdWVzLm1kIGZvciBsaW5rIHRvIGlzc3VlXG4gIHByb3Bvc2FsczogdHJ1ZSxcbn07XG5cbmNvbnN0IGlzUHJvZCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNsaWVudEJhYmVsQ29uZmlnIChhcGkpIHtcbiAgYXBpPy5jYWNoZSgoKSA9PiBpc1Byb2QpO1xuXG4gIC8vIEBzZWUgaHR0cHM6Ly9iYWJlbGpzLmlvL2RvY3MvZW4vYXNzdW1wdGlvbnNcbiAgY29uc3QgYXNzdW1wdGlvbnMgPSB7XG4gICAgYXJyYXlMaWtlSXNJdGVyYWJsZTogdHJ1ZSxcbiAgICBjb25zdGFudFJlZXhwb3J0czogaXNQcm9kLCAvLyBtaWdodCBjaGFuZ2UgZHVlIHRvIG1vZHVsZS5ob3Q/XG4gICAgY29uc3RhbnRTdXBlcjogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlTW9kdWxlTWV0YTogdHJ1ZSxcbiAgICBpZ25vcmVGdW5jdGlvbkxlbmd0aDogdHJ1ZSxcbiAgICBpZ25vcmVUb1ByaW1pdGl2ZUhpbnQ6IHRydWUsXG4gICAgaXRlcmFibGVJc0FycmF5OiBmYWxzZSxcbiAgICBtdXRhYmxlVGVtcGxhdGVPYmplY3Q6IGZhbHNlLFxuICAgIG5vQ2xhc3NDYWxsczogdHJ1ZSxcbiAgICBub0RvY3VtZW50QWxsOiB0cnVlLFxuICAgIG5vTmV3QXJyb3dzOiB0cnVlLFxuICAgIG9iamVjdFJlc3ROb1N5bWJvbHM6IHRydWUsXG4gICAgcHJpdmF0ZUZpZWxkc0FzUHJvcGVydGllczogIWlzUHJvZCxcbiAgICBwdXJlR2V0dGVyczogdHJ1ZSxcbiAgICBzZXRDbGFzc01ldGhvZHM6IGZhbHNlLFxuICAgIHNldENvbXB1dGVkUHJvcGVydGllczogZmFsc2UsXG4gICAgc2V0UHVibGljQ2xhc3NGaWVsZHM6IGZhbHNlLFxuICAgIHNldFNwcmVhZFByb3BlcnRpZXM6IGZhbHNlLFxuICAgIHNraXBGb3JPZkl0ZXJhdG9yQ2xvc2luZzogdHJ1ZSxcbiAgICBzdXBlcklzQ2FsbGFibGVDb25zdHJ1Y3RvcjogdHJ1ZSxcbiAgfTtcblxuICBjb25zdCBwcmVzZXRzID0gW1xuICAgIC8vIFsgLy8gdG9kbzogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmFiZWwvcHJlc2V0LW1vZHVsZXNcbiAgICAvLyAgICdAYmFiZWwvcHJlc2V0LW1vZHVsZXMnLFxuICAgIC8vICAge1xuICAgIC8vICAgICBsb29zZTogdHJ1ZVxuICAgIC8vICAgfSxcblxuICAgIC8vIF0sXG5cbiAgICBbXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzI2JhYmVscHJlc2V0LWVudlxuICAgICAgJ0BiYWJlbC9wcmVzZXQtZW52JyxcbiAgICAgIHtcbiAgICAgICAgdGFyZ2V0czoge1xuICAgICAgICAgIGJyb3dzZXJzOiAnbGFzdCAyIHZlcnNpb25zLCA+IDUlJ1xuICAgICAgICB9LFxuICAgICAgICAvLyBpbXBvcnQgY29yZWpzIHBvbHlmaWxzIGFzIHVzZWQgYnkgZWFjaCBmaWxlXG4gICAgICAgIHVzZUJ1aWx0SW5zOiAndXNhZ2UnLFxuICAgICAgICBidWdmaXhlczogdHJ1ZSxcbiAgICAgICAgLy8gZW5hYmxlXG4gICAgICAgIGNvcmVqcyxcbiAgICAgICAgbW9kdWxlczogZmFsc2UsIC8vIHJlbHkgb24gd2VicGFjayBmb3IgdHJlZXNoYWtpbmcgd2hpY2ggbmVlZHMgdGhpc1xuICAgICAgICBkZWJ1ZzogIWlzUHJvZCxcbiAgICAgIH1cbiAgICBdLFxuICAgIFtcbiAgICAgICdAYmFiZWwvcHJlc2V0LXJlYWN0JyxcbiAgICAgIHtcbiAgICAgICAgcnVudGltZTogJ2NsYXNzaWMnLFxuICAgICAgICBkZXZlbG9wbWVudDogIWlzUHJvZFxuICAgICAgfVxuICAgIF0sXG4gICAgWydAYmFiZWwvcHJlc2V0LWZsb3cnXSxcbiAgXS5maWx0ZXIoZSA9PiBlKTtcblxuICBjb25zdCBwbHVnaW5zID0gW1xuICAgIFtcbiAgICAgICdAYmFiZWwvcGx1Z2luLXRyYW5zZm9ybS1ydW50aW1lJyxcbiAgICAgIHtcbiAgICAgICAgYWJzb2x1dGVSdW50aW1lOiBmYWxzZSxcbiAgICAgICAgY29yZWpzLFxuICAgICAgICBoZWxwZXJzOiB0cnVlLFxuICAgICAgICByZWdlbmVyYXRvcjogdHJ1ZSxcbiAgICAgICAgdmVyc2lvbjogcGtnSnNvbi5kZXBlbmRlbmNpZXNbJ0BiYWJlbC9ydW50aW1lLWNvcmVqczMnXVxuICAgICAgfVxuICAgIF0sXG4gICAgW1xuICAgICAgJ2JhYmVsLXBsdWdpbi1zdHlsZWQtY29tcG9uZW50cycsXG4gICAgICB7XG4gICAgICAgIGRpc3BsYXlOYW1lOiAhaXNQcm9kLFxuICAgICAgICBmaWxlTmFtZTogIWlzUHJvZCxcbiAgICAgICAgbWluaWZ5OiBpc1Byb2QsXG4gICAgICAgIG5hbWVzcGFjZTogJ25pcnYnLFxuICAgICAgICBwdXJlOiBpc1Byb2QsXG4gICAgICAgIHNycjogZmFsc2UsXG4gICAgICAgIHRyYW5zcGlsZVRlbXBsYXRlTGl0ZXJhbHM6IGlzUHJvZCxcbiAgICAgIH1cbiAgICBdLFxuICAgICd0YWlsY2FsbC1vcHRpbWl6YXRpb24nLFxuXG4gICAgLy8gZG9udCBuZWVkIGFueSBvZiB0aGlzIHNoaXQgYmVjYXVzZSB3ZSB1c2UgY29yZWpzXG4gICAgLy8ga2VlcGluZyB0aGlzIGhlcmUgdGhvIGp1c3QgaW4gY2FzZVxuICAgIC8vICdAYmFiZWwvcGx1Z2luLXByb3Bvc2FsLWNsYXNzLXByb3BlcnRpZXMnLFxuICAgIC8vICdAYmFiZWwvcGx1Z2luLXByb3Bvc2FsLWV4cG9ydC1kZWZhdWx0LWZyb20nLFxuICAgIC8vICdAYmFiZWwvcGx1Z2luLXByb3Bvc2FsLW51bGxpc2gtY29hbGVzY2luZy1vcGVyYXRvcicsXG4gICAgLy8gJ0BiYWJlbC9wbHVnaW4tcHJvcG9zYWwtb3B0aW9uYWwtY2F0Y2gtYmluZGluZycsXG4gICAgLy8gJ0BiYWJlbC9wbHVnaW4tcHJvcG9zYWwtb3B0aW9uYWwtY2hhaW5pbmcnLFxuICAgIC8vICdAYmFiZWwvcGx1Z2luLXByb3Bvc2FsLXByaXZhdGUtbWV0aG9kcycsXG4gICAgLy8gJ0BiYWJlbC9wbHVnaW4tcHJvcG9zYWwtdGhyb3ctZXhwcmVzc2lvbnMnLFxuICAgIC8vICdAYmFiZWwvcGx1Z2luLXN5bnRheC1keW5hbWljLWltcG9ydCcsXG4gICAgLy8gJ0BiYWJlbC9wbHVnaW4tcHJvcG9zYWwtZXhwb3J0LWRlZmF1bHQtZnJvbScsXG4gICAgJ0BiYWJlbC9wbHVnaW4tdHJhbnNmb3JtLXJlYWN0LWNvbnN0YW50LWVsZW1lbnRzJyxcbiAgICBpc1Byb2QgJiYgJ0BiYWJlbC9wbHVnaW4tdHJhbnNmb3JtLXJlYWN0LWlubGluZS1lbGVtZW50cycsXG4gICAgLy8gWyBkaXNhYmxlZCBmb3IgdHJlZXNoYWtpbmcgdmlhIHdlYnBhY2tcbiAgICAvLyAgICdAYmFiZWwvcGx1Z2luLXRyYW5zZm9ybS1tb2R1bGVzLWNvbW1vbmpzJyxcbiAgICAvLyAgIHtcbiAgICAvLyAgICAgaW1wb3J0SW50ZXJvcDogJ2JhYmVsJ1xuICAgIC8vICAgfVxuICAgIC8vIF0sXG4gIF0uZmlsdGVyKGUgPT4gZSk7XG5cbiAgcmV0dXJuIHtcbiAgICBhc3N1bXB0aW9ucyxcbiAgICBwcmVzZXRzLFxuICAgIHBsdWdpbnMsXG4gIH1cbn1cbiJdfQ==